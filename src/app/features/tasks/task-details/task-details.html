<div class="task-details-container">
  @if (isFetching) {
  <app-loader message="Fetching task details..."></app-loader>
  } @else if (taskNotFound) {
  <app-task-details-not-found></app-task-details-not-found>
  } @else {
  <app-task-details-form
    [task]="task"
    [isEditMode]="isEditMode"
    [isLoading]="isLoading"
    [isDeleting]="isDeleting"
    [isDownloading]="isDownloading"
    [isRemoving]="isRemoving"
    [selectedFileName]="selectedFileName"
    (save)="saveTask()"
    (delete)="onDelete()"
    (download)="onDownload()"
    (remove)="onRemoveAttachment()"
    (fileSelected)="onFileSelected($event)"
  ></app-task-details-form>
  @if (isEditMode) {
  <hr class="section-divider" />
  <app-task-comments [taskId]="task.id"></app-task-comments>
  } }
</div>
